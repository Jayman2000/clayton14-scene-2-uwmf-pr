# Reference for Scenes and Scripts Included with Scene 2 UWMF

WIP: This document is missing a lot of stuff at the moment.

## Glossary

- **map pixel** — the absolute unit used by [UWMF]. Anything in a UWMF map can
be measured in map pixels.

	1 map pixel is not necessarily the same length as 1 pixel in a graphic
	used by the source port. For example, let’s say that an [`Actor`] uses
	a PNG [sprite][Actor states usage] that is 32 pixels wide. A [`TEXTURES` lump]
	could be used to scale that PNG to half of its original size.
	Additionally, the [`Actor`’s `scale`][Actor properties rendering] might
	scale the `Actor` down to half of its regular size. In this example, 1
	pixel in the PNG sprite would become 0.25 map pixels in game.

- **tile unit** — the relative unit used by UWMF. 1 tile unit equals a certain
number of map pixels. A BaseMap’s Tile Size (see below) determines the number of
map pixels in 1 tile unit.

- **wall** — a rectangle. Walls are always 1 tile unit long. The front side of a
wall may have a texture applied to it. The back side of a wall is always
invisible. Walls always face either east, north, south or west. In other words,
you can’t create diagonal walls.

## Usable Textures

[There are many different types of textures that can be used in Godot
games.](https://docs.godotengine.org/en/3.4/classes/class_texture.html)
Only some of them can be used in Wolfenstein maps.

### Textures generated by the Graphics Extractor

The Graphics Extractor will generate textures and put them in
`res://wolf_editing_tools/generated/art/walls/<name>`. The `<name>` will be the
file name of what ever VSWAP file you used (`VSWAP.WL6` for Wolfenstein 3D,
`VSWAP.SOD` for Spear of Destiny, etc.).

The term “walls” is only used because that’s what they’re called in [the VSWAP
file format](https://vpoupet.github.io/wolfenstein/docs/files#vswapwl6). ECWolf
(and, presumably, any other port that supports UWMF) lets you use “wall”
textures on floors and ceilings.

It’s important that you only use textures from a single VSWAP file. If you
create a map that uses textures from both `VSWAP.WL6` and from `vswap.n3d`, then
you run the risk of creating a map that has missing textures no matter which
game it’s run with. The only exception to this rule is with [the Spear of
Destiny mission packs](https://wolfenstein.fandom.com/wiki/Spear_of_Destiny_mission_packs).
ECWolf also loads `VSWAP.SOD` when you start either mission pack, so it’s OK to
use textures from both `VSWAP.SOD` and `VSWAP.SD2` or textures from both
`VSWAP.SOD` and `VSWAP.SD3` in a single map.

### `SingleColorTexture`

A `SingleColorTexture` can be created using any `Texture` property’s drop-down
menu. If property is set to a `SingleColorTexture`, then you can click on the
texture and edit its one and only property: `color`

### `InvisibleTexture`

An `InvisibleTexture` can be created using any `Texture` property’s drop-down
menu. Make sure that there’s something visible behind one of these, or else it
will cause
[the hall of mirrors effect](https://doomwiki.org/wiki/Hall_of_mirrors).

## Scenes used to build levels

### BaseMap

**Location:** `res://wolf_editing_tools/scenes_and_scripts/map/base_map.tscn`

**Description:** When a `BaseMap` `Node` is [ready], it will use information
about itself and its children to generate a [WAD] file that contains a map. In
other words when you run a BaseMap scene, it will build your map.

#### Properties

- **Internal Name:** This name is used as the [map header] in the [WAD] file
that the `BaseMap` generates. It should be eight characters or less since
[that’s the limit for lump names][WAD directory]. Additionally, the generated
[WAD] file’s name will be based on the internal name.
- **Automap Name:** The name of the level that will be displayed when the player
opens the automap. In ECWolf, this name may be overridden by [MAPINFO].
- **Tile Size:** Determines the length (in map pixels) of 1 tile unit.

	You should probably leave this set at 64. The Tile Size property
	corresponds to [the global `tileSize` property in
	UWMF][global properties]. The latest stable version of ECWolf (1.3.3)
	seems to ignore `tileSize` at the moment. I’m not sure if `tileSize` can
	be used in other ports or the latest development version of ECWolf.

[`Actor`]: https://maniacsvault.net/ecwolf/wiki/Classes:Actor
[Actor properties rendering]: https://maniacsvault.net/ecwolf/wiki/Actor_properties#Rendering
[Actor states usage]: https://maniacsvault.net/ecwolf/wiki/Actor_states#Usage
[global properties]: https://maniacsvault.net/ecwolf/wiki/Universal_Wolfenstein_Map_Format#Global_Properties
[map header]: https://zdoom.org/wiki/Universal_Doom_Map_Format#Map_lumps
[MAPINFO]: https://maniacsvault.net/ecwolf/wiki/MAPINFO
[ready]: https://docs.godotengine.org/en/3.4/classes/class_node.html#class-node-constant-notification-ready
[`TEXTURES` lump]: https://maniacsvault.net/ecwolf/wiki/TEXTURES
[UWMF]: https://maniacsvault.net/ecwolf/wiki/Universal_Wolfenstein_Map_Format
[WAD]: https://doomwiki.org/wiki/WAD
[WAD directory]: https://doomwiki.org/wiki/WAD#Directory
